clear;
clc;
ob=zeros(6,5);
ob(1,1)=10;ob(2,1)=40;ob(1,2)=20;ob(2,2)=40;ob(1,3)=20;ob(2,3)=30;ob(1,4)=10;ob(2,4)=30;ob(1,5)=10;ob(2,5)=40;fill(ob(1,:),ob(2,:),'K');hold on  
ob(3,1)=5;ob(4,1)=25;ob(3,2)=21;ob(4,2)=25;ob(3,3)=21;ob(4,3)=15;ob(3,4)=5;ob(4,4)=15;ob(3,5)=5;ob(4,5)=25;fill(ob(3,:),ob(4,:),'K');hold on 
ob(5,1)=12.5;ob(6,1)=60;ob(5,2)=30;ob(6,2)=60;ob(5,3)=30;ob(6,3)=50;ob(5,4)=12.5;ob(6,4)=50;ob(5,5)=12.5;ob(6,5)=60;fill(ob(5,:),ob(6,:),'K');hold on 
% ob(7,1)=20;ob(8,1)=12.5;ob(7,2)=22;ob(8,2)=12.5;ob(7,3)=22;ob(8,3)=5;ob(7,4)=20;ob(8,4)=5;ob(7,5)=20;ob(8,5)=12.5;fill(ob(7,:),ob(8,:),'K');hold on
start=zeros(2,4);
start(1,1)=15;start(2,1)=5;start(1,2)=17.5;start(2,2)=5;start(1,3)=17.5;start(2,3)=0;start(1,4)=15;start(2,4)=0; fill(start(1,:),start(2,:),'b');
goal=[15;70]; plot(goal(1),goal(2),'d');
axis([0,70,0,70]);
%%%%%%%%%%%  A   %%%%%%%%%%%%%%%%%
path=AS(ob,start,goal);

% ob(7,1)=20;ob(8,1)=12.5;ob(7,2)=22;ob(8,2)=12.5;ob(7,3)=22;ob(8,3)=5;ob(7,4)=20;ob(8,4)=5;ob(7,5)=20;ob(8,5)=12.5;fill(ob(7,:),ob(8,:),'K');hold on

% for j=1:100
% p0=[10 0];
% p1=[j 40];
% o=40;
% p2=[o*0.05+2*p1(1)-p0(1)  o*0.05+2*p1(2)-p0(2)];
% line([p0(1),p1(1)],[p0(2),p1(2)])
% line([p1(1),p2(1)],[p1(2),p2(2)])
% plot(p0(1),p0(2),'*','MarkerSize',10);hold on ; 
% plot(p1(1),p1(2),'*','MarkerSize',10);hold on ; 
% plot(p2(1),p2(2),'*','MarkerSize',10);hold on ; 
% 
% end


% for t=0:0.01:1
%     p0=[10    50];
%     p1=[10.0000   50.1000];
%     p2=[10.0000   50.2000];
%     p3=[10.0000   64.8000];
%     p4=[10.0000   64.9000];
%     p5=[10    65];
%            x=(1-t)^5*p0(1)+5*t*(1-t)^4*p1(1)+10*t^2*(1-t)^3*p2(1)+10*t^3*(1-t)^2*p3(1)+5*t^4*(1-t)*p4(1)+t^5*p5(1);
%            y=(1-t)^5*p0(2)+5*t*(1-t)^4*p1(2)+10*t^2*(1-t)^3*p2(2)+10*t^3*(1-t)^2*p3(2)+5*t^4*(1-t)*p4(2)+t^5*p5(2);
%            diffx1=5*(p1(1)-p0(1))*(1-t)^4+20*(p2(1)-p1(1))*t*(1-t)^3+30*(p3(1)-p2(1))*t^2*(1-t)^2+20*(p4(1)-p3(1))*t^3*(1-t)+5*(p5(1)-p4(1))*t^4;
%            diffy1=5*(p1(2)-p0(2))*(1-t)^4+20*(p2(2)-p1(2))*t*(1-t)^3+30*(p3(2)-p2(2))*t^2*(1-t)^2+20*(p4(2)-p3(2))*t^3*(1-t)+5*(p5(2)-p4(2))*t^4;
%            diffx=diffx1/sqrt((diffx1)^2+(diffy1)^2);          diffy=diffy1/sqrt((diffx1)^2+(diffy1)^2); 
%            v1=[0,1;-1,0]*[diffx;diffy];       
%            x1=x+2.5*v1(1);
%            y1=y+2.5*v1(2);
%            x2=x1-5*diffx;
%            y2=y1-5*diffy;
%            x3=x-5*diffx;
%            y3=y-5*diffy;
%            v=[x,x1,x2,x3,x;y,y1,y2,y3,y];
%            y=roundn(y,-5);
%            s_ob=find_ob(v,ob);
%  if size(s_ob,2)>0
%  s_ob
%  t
%  v
%  v=[10.0000   12.5000   12.5000   10.0000   10.0000;50.1056   50.1056   45.1056   45.1056   50.1056]
%  s_ob=find_ob(v,ob)
%            line([v(1,1),v(1,2)],[v(2,1),v(2,2)]);
%            line([v(1,2),v(1,3)],[v(2,2),v(2,3)]);
%            line([v(1,3),v(1,4)],[v(2,3),v(2,4)]);
%            line([v(1,4),v(1,5)],[v(2,4),v(2,5)]);
 
 
 
%   line([x,x1],[y,y1]);
%            line([x1,x2],[y1,y2]);
%            line([x2,x3],[y2,y3]);
%            line([x3,x],[y3,y]);
%  break;
%  end
%         
%     
% end


% v=[10.0000   12.5000   12.5000   10.0000   10.0000;50.1056   50.1056   45.1056   45.1056   50.1056]
% s_ob=find_ob(v,ob)
%            line([v(1,1),v(1,2)],[v(2,1),v(2,2)]);
%            line([v(1,2),v(1,3)],[v(2,2),v(2,3)]);
%            line([v(1,3),v(1,4)],[v(2,3),v(2,4)]);
%            line([v(1,4),v(1,5)],[v(2,4),v(2,5)]);








% 10.0000   20.0000   20.0000   10.0000   10.0000
% 40.0000   40.0000   30.0000   30.0000   40.0000

% x1=[19.8880   21.6783   25.1682   23.3779   19.8880];
% y1=[40.1233   41.8682   38.2876   36.5427   40.1233];
% v=[x1;y1]
% xmin=30;
% xmax=40;
% ymin=15;
% ymax=20;
% v=[xmin,xmax,xmax,xmin,xmin;ymax,ymax,ymin,ymin,ymax];
% v=[20,25,22,20,20;15,10,8,10,15];
% ob([1 2],:)
% find_ob(v,ob([1 2],:))

%   p0=[ 21    15];
% p1=[     23.8000   15.0000];
% 
%   p2=[   26.6000   15.0000];
%  p3=[  25.5305   21.7084];
%  p4=[  23.2652   23.3542];
%  p5=[   21    25];
% Plotbe(p0,p1,p2,p3,p4,p5)





